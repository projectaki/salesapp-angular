<ng-container *ngIf="auth.isAuthenticated$ | async; else loggedOut">
  <ng-container *ngIf="isSmall">
    <button
      mat-icon-button
      [matMenuTriggerFor]="menu"
      aria-label="Example icon-button with a menu"
    >
      <mat-icon color="accent">more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item routerLink="./stores">
        <mat-icon color="accent">shopping_bag</mat-icon>
        <span>Stores</span>
      </button>
      <button mat-menu-item routerLink="./profile">
        <mat-icon color="accent">person</mat-icon>
        <span>Profile</span>
      </button>
      <button
        mat-menu-item
        mat-basic-button
        color="accent"
        (click)="auth.logout()"
      >
        <mat-icon color="warn">exit_to_app</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  </ng-container>
  <div *ngIf="!isSmall" fxLayout="row" fxLayoutGap="2em">
    <button mat-button color="accent" routerLink="./stores">
      <span>Stores</span>
    </button>
    <button mat-button color="accent" routerLink="./profile">
      <span>Profile</span>
    </button>
    <button mat-flat-button color="warn" (click)="auth.logout()">Logout</button>
  </div>
</ng-container>

<ng-template #loggedOut>
  <button mat-flat-button color="accent" (click)="auth.loginWithRedirect()">
    Login
  </button>
</ng-template>
